<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Memories - T·∫øt 2026</title>
<!
<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(to bottom,#fff5f5,#ffecec);
    overflow-x:hidden;
}

/* Banner */
.tet-banner{
    text-align:center;
    padding:15px;
    background:linear-gradient(90deg,#d90429,#ffba08);
    color:white;
    font-weight:bold;
    font-size:20px;
}


button{
    background:#d90429;
    color:white;
    border:none;
    padding:6px 12px;
    border-radius:20px;
    cursor:pointer;
}

button:hover{
    opacity:0.85;
}

input, textarea{
    padding:8px;
    border-radius:8px;
    border:1px solid #ccc;
}

#gallery{
    column-count:3;
    column-gap:15px;
    padding:20px;
}

.card{
    background:white;
    border-radius:15px;
    margin-bottom:15px;
    break-inside:avoid;
    box-shadow:0 3px 10px rgba(0,0,0,0.1);
    overflow:hidden;
}

.card img{
    width:100%;
}

.card-content{
    padding:10px;
}

.comment{
    background:#fff3cd;
    padding:5px;
    border-radius:8px;
    margin-top:5px;
    font-size:13px;
}

/* ===== HOA ƒê√ÄO ICON ===== */
.petal{
    position:fixed;
    top:-30px;
    font-size:22px;
    pointer-events:none;
    animation:fall linear forwards;
}

@keyframes fall{
    0%{
        transform:translateY(0) rotate(0deg);
        opacity:1;
    }
    100%{
        transform:translateY(100vh) rotate(360deg);
        opacity:0.9;
    }
}
</style>
</head>

<body>

<div class="tet-banner">
üå∏ M·ª´ng Xu√¢n B√≠nh Ng·ªç 2026 üå∏<br>
THPT Mai Thanh Th·∫ø
</div>

<!-- LOGIN -->
<div id="loginPage" style="text-align:center;margin-top:100px;">
    <h2>Welcome to Memories</h2>
    <input type="text" id="username" placeholder="Username">
    <br><br>
    <input type="file" id="avatarUpload" accept="image/*">
    <br><br>
    <button onclick="register()">Enter</button>
</div>

<!-- MAIN -->
<div id="mainPage" style="display:none;">
    <div class="navbar">
        <div class="logo">Memories</div>
        <div>
            <span id="displayName"></span>
            <img id="displayAvatar" class="avatar">
            <button onclick="logout()">Logout</button>
        </div>
    </div>

    <div style="padding:20px;">
        <input type="file" id="upload" accept="image/*">
        <textarea id="description" placeholder="Write your memory..."></textarea>
        <button onclick="addPost()">Post</button>
    </div>

    <div id="gallery"></div>
</div>

<script>

let posts=[];
try{
    const stored=localStorage.getItem("posts");
    if(stored) posts=JSON.parse(stored);
}catch(e){posts=[];}

function savePosts(){
    localStorage.setItem("posts",JSON.stringify(posts));
}

function register(){
    const username=document.getElementById("username").value.trim();
    const avatarFile=document.getElementById("avatarUpload").files[0];

    if(!username||!avatarFile){
        alert("Please enter username and choose avatar!");
        return;
    }

    const reader=new FileReader();
    reader.onload=function(e){
        const user={
            username:username,
            avatar:e.target.result
        };
        localStorage.setItem("currentUser",JSON.stringify(user));
        loadUser();
    };
    reader.readAsDataURL(avatarFile);
}

function loadUser(){
    const user=localStorage.getItem("currentUser");
    if(user){
        const parsed=JSON.parse(user);
        document.getElementById("loginPage").style.display="none";
        document.getElementById("mainPage").style.display="block";
        document.getElementById("displayName").innerText=parsed.username;
        document.getElementById("displayAvatar").src=parsed.avatar;
        renderPosts();
    }
}

function logout(){
    localStorage.removeItem("currentUser");
    location.reload();
}

function addPost(){
    const file=document.getElementById("upload").files[0];
    const desc=document.getElementById("description").value;
    const user=JSON.parse(localStorage.getItem("currentUser"));

    if(!file){alert("Choose an image!");return;}

    const reader=new FileReader();
    reader.onload=function(e){

        posts.unshift({
            id:Date.now(),
            user:user.username,
            avatar:user.avatar,
            image:e.target.result,
            desc:desc,
            likes:0,
            comments:[]
        });

        savePosts();
        renderPosts();
    }
    reader.readAsDataURL(file);
}

function renderPosts(){
    const gallery=document.getElementById("gallery");
    gallery.innerHTML="";

    posts.forEach(post=>{
        const card=document.createElement("div");
        card.className="card";

        card.innerHTML=`
            <img src="${post.image}">
            <div class="card-content">
                <div style="display:flex;align-items:center;gap:8px;">
                    <img src="${post.avatar}" class="avatar">
                    <b>${post.user}</b>
                </div>
                <div>${post.desc}</div>
                <button onclick="likePost(${post.id})">‚ù§Ô∏è ${post.likes}</button>
                <div>
                    <input placeholder="Write a comment..."
                    onkeypress="if(event.key==='Enter'){addComment(${post.id}, this.value); this.value='';}">
                </div>
            </div>
        `;

        post.comments.forEach(c=>{
            const cm=document.createElement("div");
            cm.className="comment";
            cm.innerText=c.user+": "+c.text;
            card.querySelector(".card-content").appendChild(cm);
        });

        gallery.appendChild(card);
    });
}

function likePost(id){
    const post=posts.find(p=>p.id===id);
    if(post){
        post.likes++;
        savePosts();
        renderPosts();
    }
}

function addComment(id,text){
    if(!text) return;
    const user=JSON.parse(localStorage.getItem("currentUser"));
    const post=posts.find(p=>p.id===id);
    if(post&&user){
        post.comments.push({
            user:user.username,
            text:text
        });
        savePosts();
        renderPosts();
    }
}

/* ===== HOA ƒê√ÄO ICON üå∏ ===== */
function createPetal(){
    const petal=document.createElement("div");
    petal.className="petal";
    petal.innerText="üå∏";

    petal.style.left=Math.random()*100+"vw";
    petal.style.animationDuration=(5+Math.random()*5)+"s";
    petal.style.fontSize=(18+Math.random()*15)+"px";

    document.body.appendChild(petal);

    setTimeout(()=>{
        petal.remove();
    },10000);
}

setInterval(createPetal,300);

loadUser();

</script>
</body>
</html>
